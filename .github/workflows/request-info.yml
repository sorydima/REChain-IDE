name: Request Info
on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  check-info:
    runs-on: ubuntu-latest
    steps:
      - name: Check issue/PR for missing info
        uses: actions/github-script@v8
        with:
          script: |
            const issue = context.payload.issue || context.payload.pull_request;
            const body = issue.body || '';
            
            // Check if issue body is too short or contains placeholder text
            const isTooShort = body.length < 50;
            const hasPlaceholder = body.includes('<!--') && body.includes('-->');
            
            if (isTooShort || hasPlaceholder) {
              const message = isTooShort 
                ? "ðŸ‘‹ Thanks for opening this issue/PR! It looks like the description might be incomplete. Could you please provide more details?"
                : "ðŸ‘‹ Thanks for opening this issue/PR! It looks like you haven't filled in all the details yet. Please complete the template.";
              
              await github.rest.issues.createComment({
                issue_number: issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: message
              });
              
              // Add label
              await github.rest.issues.addLabels({
                issue_number: issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                labels: ['needs-info']
              });
            }
