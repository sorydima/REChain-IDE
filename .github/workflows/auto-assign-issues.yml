name: Auto Assign Issues

on:
  issues:
    types: [opened]

jobs:
  auto-assign:
    runs-on: ubuntu-latest
    steps:
      - name: Auto-assign based on labels
        uses: actions/github-script@v8
        with:
          script: |
            const issue = context.payload.issue;
            const labels = issue.labels.map(l => l.name);
            
            // Define label -> assignee mapping
            const assignments = {
              'bug': 'maintainer-bugs',
              'security': 'security-team',
              'documentation': 'docs-team',
              'feature': 'product-team'
            };
            
            for (const [label, assignee] of Object.entries(assignments)) {
              if (labels.includes(label)) {
                await github.rest.issues.addAssignees({
                  issue_number: issue.number,
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  assignees: [assignee]
                });
                break;
              }
            }
